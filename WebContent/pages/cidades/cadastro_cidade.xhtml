<!DOCTYPE html>

<ui:composition 
	template="/pages/layout/template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

	<ui:define name="titulo">Cidades</ui:define>

	<ui:define name="principal">
		<p:panel header="Cadastro de Cidades">
			<h:form id="form-cidade">
				<p:growl id="msgs" autoUpdate="true"/>
				<p:toolbar>
			        <f:facet name="left">
			            <p:commandButton value="Nova" icon="ui-icon-document"
			            	oncomplete="PF('cadastroCidadeDialog').show()"
			            	process="@this"/>
			 
			            <span class="ui-separator">
			                <span class="ui-icon ui-icon-grip-dotted-vertical" />
			            </span>
			 
			            <p:commandButton title="Editar" icon="ui-icon-pencil" />
			            <p:commandButton title="Excluir" icon="ui-icon-trash" />
			        </f:facet>
			 
			    </p:toolbar>
				<br/>
				<p:dataTable value="#{cidadeBean.cidades}" var="cidade" id="tabela-cidades"
					style="width:50%;" paginator="true" rows="50" rowsPerPageTemplate="25, 50, 100"
					paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} 
					{PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">
					<p:column headerText="Nome" filterBy="#{cidade.nome}" 
						filterMatchMode="contains" sortBy="#{cidade.nome}">
						<h:outputText value="#{cidade.nome}"/>
					</p:column>
					<p:column headerText="Estado" style="width:35%">
						<h:outputText value="#{cidade.estado.label}"/>
					</p:column>
				</p:dataTable>
				
				<p:dialog header="Nova Cidade" widgetVar="cadastroCidadeDialog"
					modal="true" resizable="false" draggable="false" id="cidade-dialog"
					closeOnEscape="true" width="350" >
					<h:panelGrid columns="2" cellpadding="5">
						<h:outputLabel value="Nome:"/>
						<p:inputText value="#{cidadeBean.cidade.nome}"/>
						<h:outputLabel value="Estado:"/>
						<p:selectOneMenu value="#{cidadeBean.cidade.estado}">
							<f:selectItem itemLabel=":: Selecione::" itemValue="#{null}"/>
							<f:selectItems value="#{cidadeBean.estados}" var="estado"
								itemLabel="#{estado.label}" itemValue="#{estado}"/>
						</p:selectOneMenu>
					</h:panelGrid>
					<p:commandButton value="Salvar" icon="ui-icon-disk" 
						action="#{cidadeBean.salvar}" oncomplete="PF('cadastroCidadeDialog').hide()"
						update="tabela-cidades"/>
					<p:commandButton value="Cancelar" icon="ui-icon-close" 
						style="margin-left:8px;" oncomplete="PF('cadastroCidadeDialog').hide()"
						immediate="true" action="#{cidadeBean.cancelar}"/>
				</p:dialog>
			</h:form>
		</p:panel>
	</ui:define>

</ui:composition>





